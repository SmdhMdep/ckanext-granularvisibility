{% ckan_extends %}


{% block package_metadata_fields_visibility %}
{% asset 'granularvisibility/granularvisibility-css' %}

    <div class="form-group control-full">
            <label class="control-label" for="field-visibility">{{ _("Granular Visibility") }}</label>
        <div class="controls">
            {% block package_metadata_fields_visibility_select %}
            <select id="field-visibility" name="visibilityid" data-module="autocomplete">
                {% endblock %}
                {% for visibility in h.get_visibilities()  %}
                    <option value="{{ visibility.visibilityid }}" 
                        title="{{ visibility.description }}" 
                        {% if h.is_selected(data.id, visibility.visibilityid) %} selected="selected" {% endif %}
                        data-description="{{ visibility.description }}"
                    >
                        {{ visibility.visibility }}
                    </option>
                {% endfor %}
            </select>
        </div>
    <div id="viz-description-container" class="alert alert-info">
        <i class="fa fa-info-circle" id="viz-des-icon"></i>
        <span id="viz-description"></span>
    </div>
    </div>

    {{ super() }}
    {% asset 'granularvisibility/granularvisibility-js' %}
{% endblock %}