{% ckan_extends %}

{% block package_metadata_fields_visibility %}

{% if 'id' in data %} 
    <div class="form-group control-full">
        <label class="control-label" for="field-visibility">{{ _("Granular Visibility") }}</label>
        <div class="controls">
        {% block package_metadata_fields_visibility_select %}
        <select id="field-visibility" name="visibilityid" data-module="autocomplete">
        {% endblock %}
            {% for visibility in h.get_visibilities()  %}
                <option value="{{ visibility.visibilityid }}" title="{{ visibility.description }}" {% if h.is_selected(data.id, visibility.visibilityid) %} selected="selected" {% endif %}>{{ visibility.visibility }}</option>
            {% endfor %}
        </select>
        </div>
    </div>
{% else %}
    <div class="form-group control-medium">
        <label for="field-private" class="control-label">{{ _('Visibility') }}</label>
        <div class="controls">
          <select id="field-private" name="private" class="form-control">
            {% for option in [('True', _('Private')), ('False', _('Public'))] %}
            <option value="{{ option[0] }}" {% if option[0] == data.private|trim %}selected="selected"{% endif %}>{{ option[1] }}</option>
            {% endfor %}
          </select>
        </div>
{% endif %}

{{ super() }}

{% endblock %}